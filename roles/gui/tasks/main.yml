---
- name: Add Visual Studio Code repository
  yum_repository:
    name: vscode
    description: Visual Studio Code repository
    baseurl: https://packages.microsoft.com/yumrepos/vscode
    gpgcheck: yes
    gpgkey: https://packages.microsoft.com/keys/microsoft.asc
    state: present

- name: Install Packages
  package:
    name: "{{ item }}"
    state: latest
  loop: "{{ packages }}"

- name: Install Snap
  dnf:
    name: snapd
    state: present

- name: Enable snapd
  ansible.builtin.systemd:
    name: snapd
    state: started
    enabled: yes

- name: Install Spotify via Snap
  snap:
    name: spotify
    state: present
